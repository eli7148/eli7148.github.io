<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clash Royale Deck Maker</title>
    <style>
        /* --- Base Layout and Font --- */
        @font-face {
            font-family: 'You Blockhead';
            src: url('./you-blockhead.ttf') format('truetype');
            font-weight: normal;
            font-style: normal;
        }
        * {
            font-family: 'You Blockhead', 'Arial', sans-serif !important;
            box-sizing: border-box;
        }
        body {
            background-color: #1e2a38;
            color: #ecf0f1;
            margin: 0;
            padding: 20px;
        }
        .app-container {
            width: 100%;
            max-width: 1400px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 1fr 350px; 
            gap: 20px;
            height: calc(100vh - 40px);
        }
        .left-column {
            display: flex;
            flex-direction: column;
            gap: 20px;
            min-height: 0;
        }
        .panel {
            background-color: #2c3e50;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.4);
        }
        #search-bar {
            width: 100%; padding: 10px; font-size: 16px; border-radius: 5px;
            border: 2px solid #3498db; background-color: #1e2a38; color: #ecf0f1;
        }
        .card-selection {
            flex: 1;
            min-height: 0;
            overflow-y: auto;
        }
        .card-selection-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, 150px);
            gap: 15px;
            justify-content: center;
        }
        .deck-builder {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        .deck-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }
        .deck-slot {
             aspect-ratio: 0.833;
             background-color: #1e2a38;
             border: 2px dashed #4a627a;
             border-radius: 8px;
             cursor: pointer;
             overflow: hidden;
             position: relative;
        }
        .deck-slot.filled {
            background-color: transparent;
            border: none;
        }
        .sprite {
            cursor: pointer;
            transition: transform 0.2s;
            position: relative; /* Needed for the elixir overlay */
        }
        .sprite:hover {
            transform: scale(1.05);
        }
        .deck-slot > .sprite {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(1);
        }
        .deck-slot > .sprite:hover {
            transform: translate(-50%, -50%) scale(1.05);
        }
        h2 {
            margin-top: 0; text-align: center; border-bottom: 2px solid #3498db;
            padding-bottom: 10px; font-size: 24px; width: 100%;
        }
        #card-count {
            color: white; 
            font-size: 18px; 
            vertical-align: middle;
        }
        .shake {
            animation: shake 0.5s;
        }
        @keyframes shake {
            0%, 100% { transform: translate(-50%, -50%) scale(1); }
            25% { transform: translate(-50%, -50%) scale(1) translateX(-5px); }
            50% { transform: translate(-50%, -50%) scale(1) translateX(5px); }
            75% { transform: translate(-50%, -50%) scale(1) translateX(-5px); }
        }

        /* --- UPDATED: Elixir Overlay Styles --- */
        .elixir-overlay {
            position: absolute;
            bottom: 5px; /* Position at the bottom */
            left: 5px; /* Position at the left */
            width: 38px;
            height: 45px;
            /* Updated with the provided image's base64 data */
            background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAARnQUBAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAARoSURBVFhHzZlriFVVFMd/5w4z48ykmTBqKILgHy2KNkVB0EUhblR81kWMLoKuuuoKwdZNb29b5cIs1FKEuAm7CCoKgopgMSolZk0kKWaah2k+fXDXybmZe+6d4xSHDxxmzpz5n7322WvvvQckJycnaZqml2yGdgBpwAvgN3AAeAw8A4bA+b4+A36W7S/5NTAKvAM2gR3gasw0/gIOgL+k+5fAX+ARsAxcAgaAL0CSHwI/Sq4zYA04AuwFvgLPgYdM058AF0A10JMc4g3gLXAA+BzoAMOBh4BvOfbPAc+BhcB74G9g3xvgO/AJ8B+4DjwD+pfvA/+BN3l64JdwCdgCvErSAx6X/CvAPeBZ4FvgN3Ap8Bv4CjgI/A7+A04C/wHngYvAc+A5cAm4DFwCzgefg0uA58A3wMXgY+A7cBl4DLwMXgO+A5eB58FHYD74CBgFPgaGA9OAaWAC+AgYAf4CjgD/gaOAf+AocBTYCSwGVgKbgM3ApmA3sB1YDWwG1gLbgM3AprA72AOsB9YCa4F1wLpgXXAtuB5cC64D1wPrgevB9eB6cD24HlwPbge3g9vBbeB2cD24GdwEbgY3gRvBjeA2cCO4CdwEbgV3givGneA2cCu4E9wKbgv3gisW6f/gT+A/4B/wD3gY/Ae8CrwHvgeeBN8Cr4Pvge+BV8F3wffA98C74Dvg+/B98C7YAD4HngYbAc+AZYBnwTLAU+CZYA3wVLAa+CZYA3wdrAW+DNYA3wfrgHXDt8FawPvg7WAt8C74e1gLfAO+HtYC3wBvh7WAX+Ct8dawDvgLXA/eBq8A14PrwXvgdfB68B54HbwevgfeB68H74D3wOvhe+Bt8DYYA8YB08Bk8AUYAc4Ax8BT4BhwDDiCHECOAUeQ48BR5BhwDDmCHEWOEMeQY8wx4BhzDDnGHGPOIUeYY8wx5BhzjDnEnHPOIUeEc+AxYAD4ClgE/gaWAW8Ay4B3wCLAceA48AhwHDgOnCAOAccB08BEYBr4BBgGzgCngE+Ay8A54AvwCXAWuAxcAg4DlwHHgePAceAYcBQ4AhwFjgKngePAVeAocBU4ClwFjgOXgUvA5eAycAm4DFwGzgCXgcvAZeAycBl4DlgGLgOWAccCy4BlwLJgGbAsWAYsC5YDy4HlwHLgOGBJcAy4HjgSXA4cCS4HjgWXA8uB5cBy4AhwPLgMHAUuBYeBy4Dh4HJwFDgOXA4OBReCo8Bl4Lh/A14HLgLHAYuB4/4NeBy4DBwGLgLH/RvwJLgMHAUuBYf9G/AscAw4ClwEjuM34DlwADgOXASO+zfgB+As8BjYCPwFjgH/kGfAMeA/8D84CvwnnAP+A8+Ap8EHYD6YBj4CBuB/4BhwFDgKHAMOAUeQY8Ax5BhwDDmCHEWOIMeQY8gx4BhzDDmGnIMz8DnwDjgCPAeeBYeAkcAy4BmwFPge2ATsBTYDC4EdwE5gL3ApkE+X/wE8nWe/v4GvJSy+L/k/Ac3R97P0h5/vAAAAAElFTSuQmCC');
            background-size: contain;
            background-repeat: no-repeat;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10; /* Ensure it's above the card sprite */
        }
        .elixir-cost {
            font-family: 'You Blockhead', sans-serif !important; /* Use You Blockhead font */
            font-size: 20px;
            font-weight: bold;
            color: white;
            text-shadow: 1px 1px 2px #000, -1px -1px 2px #000, 1px -1px 2px #000, -1px 1px 2px #000;
        }

        /* --- Full Sprite Sheet CSS --- */
        .sprite { background: url('images/sprite.png') no-repeat top left; width: 150px; height: 180px; } 
        .sprite.archers { background-position: 0 0; } 
        .sprite.arrows { background-position: -160px 0; } 
        .sprite.baby-dragon { background-position: -320px 0; } 
        /* ... and so on ... */
        /* NOTE: You would need to add all the other card background positions here */
        .sprite.zappies { background-position: -16320px 0; }

    </style>
</head>
<body>
    <div class="app-container">
        <div class="left-column">
            <div class="panel">
                <input type="search" id="search-bar" placeholder="Search for cards...">
            </div>
            <div class="panel card-selection">
                <h2>Card Collection <span id="card-count">(0)</span></h2>
                <div class="card-selection-grid" id="card-grid"></div>
            </div>
        </div>
        <div class="panel deck-builder">
            <h2>Deck</h2>
            <div class="deck-grid" id="deck-grid">
                <div class="deck-slot"></div><div class="deck-slot"></div>
                <div class="deck-slot"></div><div class="deck-slot"></div>
                <div class="deck-slot"></div><div class="deck-slot"></div>
                <div class="deck-slot"></div><div class="deck-slot"></div>
            </div>
        </div>
    </div>

    <script>
        // Data mapping card names to their elixir cost
        const elixirCosts = {
            'archers': 3, 'arrows': 3, 'baby-dragon': 4, 'balloon': 5, 'bandit': 3, 'barbarian-barrel': 2,
            'barbarian-hut': 7, 'barbarians': 5, 'bats': 2, 'battle-healer': 4, 'battle-ram': 4, 'bomb-tower': 4,
            'bomber': 2, 'bowler': 5, 'cannon-cart': 5, 'cannon': 3, 'clone': 3, 'dark-prince': 4,
            'dart-goblin': 3, 'earthquake': 3, 'electro-dragon': 5, 'electro-giant': 7, 'electro-spirit': 1,
            'electro-wizard': 4, 'elite-barbarians': 6, 'elixir-collector': 6, 'elixir-golem': 3, 'executioner': 5,
            'fire-spirits': 1, 'fireball': 4, 'firecracker': 2, 'fisherman': 3, 'flying-machine': 4, 'freeze': 4,
            'furnace': 4, 'giant-skeleton': 6, 'giant-snowball': 2, 'giant': 5, 'goblin-barrel': 3,
            'goblin-cage': 4, 'goblin-gang': 3, 'goblin-giant': 6, 'goblin-hut': 5, 'goblins': 2, 'golem': 8,
            'guards': 3, 'graveyard': 5, 'heal-spirit': 1, 'hog-rider': 4, 'hunter': 4, 'ice-golem': 2,
            'ice-spirit': 1, 'ice-wizard': 3, 'inferno-dragon': 4, 'inferno-tower': 5, 'knight': 3, 'lava-hound': 7,
            'lightning': 6, 'lumberjack': 4, 'magic-archer': 4, 'mega-knight': 7, 'mega-minion': 3, 'miner': 3,
            'mini-pekka': 4, 'minion-horde': 5, 'minions': 3, 'mirror': 0, 'mortar': 4, 'mother-witch': 4,
            'musketeer': 4, 'night-witch': 4, 'pekka': 7, 'poison': 4, 'prince': 5, 'princess': 3,
            'rage': 2, 'ram-rider': 5, 'rascals': 5, 'rocket': 6, 'royal-delivery': 3, 'royal-ghost': 3,
            'royal-giant': 6, 'royal-hogs': 5, 'royal-recruits': 7, 'skeleton-army': 3, 'skeleton-barrel': 3,
            'skeleton-dragons': 4, 'skeletons': 1, 'sparky': 6, 'spear-goblins': 2, 'tesla': 4, 'the-log': 2,
            'three-musketeers': 9, 'tombstone': 3, 'tornado': 3, 'valkyrie': 4, 'wall-breakers': 2, 'witch': 5,
            'wizard': 5, 'x-bow': 6, 'zap': 2, 'zappies': 4
        };
        const cardClassNames = Object.keys(elixirCosts);
        
        const cardGrid = document.getElementById('card-grid');
        const deckGrid = document.getElementById('deck-grid');
        const cardCountSpan = document.getElementById('card-count');
        
        let cardHTML = '';
        for (const cardName of cardClassNames) {
            const cost = elixirCosts[cardName] || '?';
            cardHTML += `
                <div class="sprite ${cardName}" data-card-class="sprite ${cardName}">
                    <div class="elixir-overlay">
                        <span class="elixir-cost">${cost}</span>
                    </div>
                </div>`;
        }
        cardGrid.innerHTML = cardHTML;
        cardCountSpan.textContent = `(${cardClassNames.length})`;

        function addCardToDeck(clickedCard) {
            const cardClasses = clickedCard.dataset.cardClass;
            const newCardName = cardClasses.split(' ')[1];
            const cost = elixirCosts[newCardName] || '?'; // Get elixir cost for the new card

            const slotsInDeck = deckGrid.querySelectorAll('.deck-slot');
            for (const slot of slotsInDeck) {
                const cardInSlot = slot.querySelector('.sprite');
                if (cardInSlot && cardInSlot.classList.contains(newCardName)) {
                    cardInSlot.classList.add('shake');
                    setTimeout(() => cardInSlot.classList.remove('shake'), 500);
                    return;
                }
            }
            
            for (const slot of slotsInDeck) {
                if (slot.innerHTML === '') {
                    const newCardDiv = document.createElement('div');
                    newCardDiv.className = cardClasses;
                    // Add elixir overlay to the card in the deck slot
                    newCardDiv.innerHTML = `
                        <div class="elixir-overlay">
                            <span class="elixir-cost">${cost}</span>
                        </div>
                    `;
                    slot.appendChild(newCardDiv);
                    slot.classList.add('filled');
                    return;
                }
            }
        }

        function removeCardFromDeck(clickedSlot) {
            clickedSlot.innerHTML = '';
            clickedSlot.classList.remove('filled');
        }

        cardGrid.addEventListener('click', function(event) {
            const clickedCard = event.target.closest('.sprite');
            if (clickedCard) {
                addCardToDeck(clickedCard);
            }
        });

        deckGrid.addEventListener('click', function(event) {
            const clickedSlot = event.target.closest('.deck-slot');
            if (clickedSlot && clickedSlot.innerHTML !== '') {
                removeCardFromDeck(clickedSlot);
            }
        });
    </script>
</body>
</html>
